<?php

namespace App\Http\Controllers\Home;

use App\Http\Controllers\Controller;
use App\Model\NavModel;

class IndexController extends Controller
{
    public function index(){
        $active = 'index';
        //查询首页项目案例模块数据
        $anli = setting('site.product');
        if($anli!=''){
            $anlidata = NavModel::where('id', $anli)->value('name');
            if($anlidata!=''){
                $anlidata = NavModel::where('id', $anli)->first()->toArray();
                $anlidata['child'] = NavModel::where('pid', $anli)->orderBy('sort','asc')->get()->toArray();
            }else{
                $anlidata = '';
            }
        }else{
            $anlidata = '';
        }

        //查询首页关于我们模块数据
        $guanyu = setting('site.aboutus');
        if($guanyu!=''){
            $gydata = NavModel::where('id', $guanyu)->value('name');
            if($gydata!=''){
                $gydata = NavModel::where('id', $guanyu)->first()->toArray();
            }else{
                $gydata = '';
            }
        }else{
            $gydata = '';
        }

        //查询首页咨询中心模块数据
        $zx = setting('site.news');
        if($zx!=''){
            $zxdata = NavModel::where('id', $zx)->value('name');
            if($zxdata!=''){
                $zxdata = NavModel::where('id', $zx)->first()->toArray();
            }else{
                $zxdata = '';
            }
        }else{
            $zxdata = '';
        }

        return view('Home.index',compact('anlidata','gydata','zxdata','active'));
    }
}
